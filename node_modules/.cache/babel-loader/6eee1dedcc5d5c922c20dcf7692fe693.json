{"ast":null,"code":"import { ChartElement, BoxElement, Box } from '../../core';\nimport LegendLayout from './legend-layout';\nimport LegendItem from './legend-item';\nimport { TOP, RIGHT, BOTTOM, LEFT, CENTER, X, Y, BLACK } from '../../common/constants';\nimport { deepExtend, defined, getSpacing, inArray, setDefaultOptions } from '../../common';\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = function (ChartElement) {\n  function Legend(options, chartService) {\n    if (chartService === void 0) chartService = {};\n    ChartElement.call(this, options);\n    this.chartService = chartService;\n\n    if (!inArray(this.options.position, [TOP, RIGHT, BOTTOM, LEFT, CUSTOM])) {\n      this.options.position = RIGHT;\n    }\n\n    this.createContainer();\n    this.createItems();\n  }\n\n  if (ChartElement) Legend.__proto__ = ChartElement;\n  Legend.prototype = Object.create(ChartElement && ChartElement.prototype);\n  Legend.prototype.constructor = Legend;\n\n  Legend.prototype.createContainer = function createContainer() {\n    var options = this.options;\n    var position = options.position;\n    var userAlign = options.align;\n    var align = position;\n    var vAlign = CENTER;\n\n    if (position === CUSTOM) {\n      align = LEFT;\n    } else if (inArray(position, [TOP, BOTTOM])) {\n      if (userAlign === \"start\") {\n        align = LEFT;\n      } else if (userAlign === \"end\") {\n        align = RIGHT;\n      } else {\n        align = CENTER;\n      }\n\n      vAlign = position;\n    } else if (userAlign) {\n      if (userAlign === \"start\") {\n        vAlign = TOP;\n      } else if (userAlign === \"end\") {\n        vAlign = BOTTOM;\n      }\n    }\n\n    this.container = new BoxElement({\n      margin: options.margin,\n      padding: options.padding,\n      background: options.background,\n      border: options.border,\n      vAlign: vAlign,\n      align: align,\n      zIndex: options.zIndex,\n      shrinkToFit: true\n    });\n    this.append(this.container);\n  };\n\n  Legend.prototype.createItems = function createItems() {\n    var chartService = this.getService();\n    var options = this.options;\n    var vertical = this.isVertical();\n    var innerElement = new LegendLayout({\n      vertical: vertical,\n      spacing: options.spacing,\n      rtl: chartService.rtl\n    }, chartService);\n    var items = options.items;\n\n    if (options.reverse) {\n      items = items.slice(0).reverse();\n    }\n\n    var count = items.length;\n\n    for (var i = 0; i < count; i++) {\n      var item = items[i];\n      innerElement.append(new LegendItem(deepExtend({}, {\n        markers: options.markers,\n        labels: options.labels,\n        rtl: chartService.rtl\n      }, options.item, item)));\n    }\n\n    innerElement.render();\n    this.container.append(innerElement);\n  };\n\n  Legend.prototype.isVertical = function isVertical() {\n    var ref = this.options;\n    var orientation = ref.orientation;\n    var position = ref.position;\n    var vertical = position === CUSTOM && orientation !== HORIZONTAL || (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [LEFT, RIGHT]));\n    return vertical;\n  };\n\n  Legend.prototype.hasItems = function hasItems() {\n    return this.container.children[0].children.length > 0;\n  };\n\n  Legend.prototype.reflow = function reflow(targetBox) {\n    var options = this.options;\n    var legendBox = targetBox.clone();\n\n    if (!this.hasItems()) {\n      this.box = legendBox;\n      return;\n    }\n\n    if (options.position === CUSTOM) {\n      this.containerCustomReflow(legendBox);\n      this.box = legendBox;\n    } else {\n      this.containerReflow(legendBox);\n    }\n  };\n\n  Legend.prototype.containerReflow = function containerReflow(targetBox) {\n    var ref = this;\n    var options = ref.options;\n    var container = ref.container;\n    var position = options.position;\n    var width = options.width;\n    var height = options.height;\n    var pos = position === TOP || position === BOTTOM ? X : Y;\n    var vertical = this.isVertical();\n    var alignTarget = targetBox.clone();\n    var containerBox = targetBox.clone();\n\n    if (position === LEFT || position === RIGHT) {\n      containerBox.y1 = alignTarget.y1 = 0;\n    }\n\n    if (vertical && height) {\n      containerBox.y2 = containerBox.y1 + height;\n      containerBox.align(alignTarget, Y, container.options.vAlign);\n    } else if (!vertical && width) {\n      containerBox.x2 = containerBox.x1 + width;\n      containerBox.align(alignTarget, X, container.options.align);\n    }\n\n    container.reflow(containerBox);\n    containerBox = container.box;\n    var box = containerBox.clone();\n\n    if (options.offsetX || options.offsetY) {\n      containerBox.translate(options.offsetX, options.offsetY);\n      this.container.reflow(containerBox);\n    }\n\n    box[pos + 1] = targetBox[pos + 1];\n    box[pos + 2] = targetBox[pos + 2];\n    this.box = box;\n  };\n\n  Legend.prototype.containerCustomReflow = function containerCustomReflow(targetBox) {\n    var ref = this;\n    var options = ref.options;\n    var container = ref.container;\n    var offsetX = options.offsetX;\n    var offsetY = options.offsetY;\n    var width = options.width;\n    var height = options.height;\n    var vertical = this.isVertical();\n    var containerBox = targetBox.clone();\n\n    if (vertical && height) {\n      containerBox.y2 = containerBox.y1 + height;\n    } else if (!vertical && width) {\n      containerBox.x2 = containerBox.x1 + width;\n    }\n\n    container.reflow(containerBox);\n    containerBox = container.box;\n    container.reflow(new Box(offsetX, offsetY, offsetX + containerBox.width(), offsetY + containerBox.height()));\n  };\n\n  Legend.prototype.renderVisual = function renderVisual() {\n    if (this.hasItems()) {\n      ChartElement.prototype.renderVisual.call(this);\n    }\n  };\n\n  return Legend;\n}(ChartElement);\n\nsetDefaultOptions(Legend, {\n  position: RIGHT,\n  items: [],\n  offsetX: 0,\n  offsetY: 0,\n  margin: getSpacing(5),\n  padding: getSpacing(5),\n  border: {\n    color: BLACK,\n    width: 0\n  },\n  item: {\n    cursor: POINTER,\n    spacing: 6\n  },\n  spacing: 6,\n  background: \"\",\n  zIndex: 1,\n  markers: {\n    border: {\n      width: 0\n    },\n    width: 15,\n    height: 3,\n    type: \"rect\",\n    align: LEFT,\n    vAlign: CENTER\n  }\n});\nexport default Legend;","map":{"version":3,"sources":["/Users/lazybaccha/Documents/Honeywell/SBE/node_modules/@progress/kendo-charts/dist/es/chart/legend/legend.js"],"names":["ChartElement","BoxElement","Box","LegendLayout","LegendItem","TOP","RIGHT","BOTTOM","LEFT","CENTER","X","Y","BLACK","deepExtend","defined","getSpacing","inArray","setDefaultOptions","HORIZONTAL","POINTER","CUSTOM","Legend","options","chartService","call","position","createContainer","createItems","__proto__","prototype","Object","create","constructor","userAlign","align","vAlign","container","margin","padding","background","border","zIndex","shrinkToFit","append","getService","vertical","isVertical","innerElement","spacing","rtl","items","reverse","slice","count","length","i","item","markers","labels","render","ref","orientation","hasItems","children","reflow","targetBox","legendBox","clone","box","containerCustomReflow","containerReflow","width","height","pos","alignTarget","containerBox","y1","y2","x2","x1","offsetX","offsetY","translate","renderVisual","color","cursor","type"],"mappings":"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","sourcesContent":["\nimport { ChartElement, BoxElement, Box } from '../../core';\nimport LegendLayout from './legend-layout';\nimport LegendItem from './legend-item';\n\nimport { TOP, RIGHT, BOTTOM, LEFT, CENTER, X, Y, BLACK } from '../../common/constants';\nimport { deepExtend, defined, getSpacing, inArray, setDefaultOptions } from '../../common';\n\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = (function (ChartElement) {\n    function Legend(options, chartService) {\n        if ( chartService === void 0 ) chartService = {};\n\n        ChartElement.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainer();\n\n        this.createItems();\n    }\n\n    if ( ChartElement ) Legend.__proto__ = ChartElement;\n    Legend.prototype = Object.create( ChartElement && ChartElement.prototype );\n    Legend.prototype.constructor = Legend;\n\n    Legend.prototype.createContainer = function createContainer () {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === \"start\") {\n                align = LEFT;\n            } else if (userAlign === \"end\") {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === \"start\") {\n                vAlign = TOP;\n            } else if (userAlign === \"end\") {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        this.append(this.container);\n    };\n\n    Legend.prototype.createItems = function createItems () {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var items = options.items;\n\n        if (options.reverse) {\n            items = items.slice(0).reverse();\n        }\n\n        var count = items.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = items[i];\n\n            innerElement.append(new LegendItem(deepExtend({}, {\n                markers: options.markers,\n                labels: options.labels,\n                rtl: chartService.rtl\n            }, options.item, item)));\n        }\n\n        innerElement.render();\n\n        this.container.append(innerElement);\n    };\n\n    Legend.prototype.isVertical = function isVertical () {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n               (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    };\n\n    Legend.prototype.hasItems = function hasItems () {\n        return this.container.children[0].children.length > 0;\n    };\n\n    Legend.prototype.reflow = function reflow (targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n    };\n\n    Legend.prototype.containerReflow = function containerReflow (targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            this.container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    };\n\n    Legend.prototype.containerCustomReflow = function containerCustomReflow (targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    };\n\n    Legend.prototype.renderVisual = function renderVisual () {\n        if (this.hasItems()) {\n            ChartElement.prototype.renderVisual.call(this);\n        }\n    };\n\n    return Legend;\n}(ChartElement));\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    items: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(5),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {\n        border: {\n            width: 0\n        },\n        width: 15,\n        height: 3,\n        type: \"rect\",\n        align: LEFT,\n        vAlign: CENTER\n    }\n});\n\nexport default Legend;"]},"metadata":{},"sourceType":"module"}