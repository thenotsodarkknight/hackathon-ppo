{"ast":null,"code":"import { geometry as geom, Color } from '@progress/kendo-drawing';\nimport { ChartElement, TextBox, ShapeElement, Box, Point } from '../../core';\nimport PointEventsMixin from '../mixins/point-events-mixin';\nimport NoteMixin from '../mixins/note-mixin';\nimport { LINE_MARKER_SIZE, FADEIN, INITIAL_ANIMATION_DURATION, BORDER_BRIGHTNESS, TOOLTIP_OFFSET, ABOVE, BELOW } from '../constants';\nimport { WHITE, CIRCLE, CENTER, TOP, BOTTOM, LEFT, HIGHLIGHT_ZINDEX } from '../../common/constants';\nimport { deepExtend, defined, getTemplate, valueOrDefault, getSpacing } from '../../common';\n\nvar LinePoint = function (ChartElement) {\n  function LinePoint(value, options) {\n    ChartElement.call(this);\n    this.value = value;\n    this.options = options;\n    this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n    this.tooltipTracking = true;\n  }\n\n  if (ChartElement) LinePoint.__proto__ = ChartElement;\n  LinePoint.prototype = Object.create(ChartElement && ChartElement.prototype);\n  LinePoint.prototype.constructor = LinePoint;\n\n  LinePoint.prototype.render = function render() {\n    var ref = this.options;\n    var markers = ref.markers;\n    var labels = ref.labels;\n\n    if (this._rendered) {\n      return;\n    }\n\n    this._rendered = true;\n\n    if (markers.visible && markers.size) {\n      this.marker = this.createMarker();\n      this.append(this.marker);\n    }\n\n    if (labels.visible) {\n      var labelTemplate = getTemplate(labels);\n      var pointData = this.pointData();\n      var labelText = this.value;\n\n      if (labelTemplate) {\n        labelText = labelTemplate(pointData);\n      } else if (labels.format) {\n        labelText = this.formatValue(labels.format);\n      }\n\n      this.label = new TextBox(labelText, deepExtend({\n        align: CENTER,\n        vAlign: CENTER,\n        margin: {\n          left: 5,\n          right: 5\n        },\n        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n      }, labels), pointData);\n      this.append(this.label);\n    }\n\n    this.createNote();\n\n    if (this.errorBar) {\n      this.append(this.errorBar);\n    }\n  };\n\n  LinePoint.prototype.markerBorder = function markerBorder() {\n    var options = this.options.markers;\n    var background = options.background;\n    var border = deepExtend({\n      color: this.color\n    }, options.border);\n\n    if (!defined(border.color)) {\n      border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n    }\n\n    return border;\n  };\n\n  LinePoint.prototype.createVisual = function createVisual() {};\n\n  LinePoint.prototype.createMarker = function createMarker() {\n    var options = this.options.markers;\n    var marker = new ShapeElement({\n      type: options.type,\n      width: options.size,\n      height: options.size,\n      rotation: options.rotation,\n      background: options.background,\n      border: this.markerBorder(),\n      opacity: options.opacity,\n      zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n      animation: options.animation,\n      visual: options.visual\n    }, {\n      dataItem: this.dataItem,\n      value: this.value,\n      series: this.series,\n      category: this.category\n    });\n    return marker;\n  };\n\n  LinePoint.prototype.markerBox = function markerBox() {\n    if (!this.marker) {\n      this.marker = this.createMarker();\n      this.marker.reflow(this._childBox);\n    }\n\n    return this.marker.box;\n  };\n\n  LinePoint.prototype.reflow = function reflow(targetBox) {\n    var this$1 = this;\n    var ref = this;\n    var options = ref.options;\n    var aboveAxis = ref.aboveAxis;\n    var vertical = options.vertical;\n    this.render();\n    this.box = targetBox;\n    var childBox = targetBox.clone();\n\n    if (vertical) {\n      if (aboveAxis) {\n        childBox.y1 -= childBox.height();\n      } else {\n        childBox.y2 += childBox.height();\n      }\n    } else {\n      if (aboveAxis) {\n        childBox.x1 += childBox.width();\n      } else {\n        childBox.x2 -= childBox.width();\n      }\n    }\n\n    this._childBox = childBox;\n\n    if (this.marker) {\n      this.marker.reflow(childBox);\n    }\n\n    this.reflowLabel(childBox);\n\n    if (this.errorBars) {\n      for (var i = 0; i < this.errorBars.length; i++) {\n        this$1.errorBars[i].reflow(childBox);\n      }\n    }\n\n    if (this.note) {\n      var noteTargetBox = this.markerBox();\n\n      if (!(options.markers.visible && options.markers.size)) {\n        var center = noteTargetBox.center();\n        noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n      }\n\n      this.note.reflow(noteTargetBox);\n    }\n  };\n\n  LinePoint.prototype.reflowLabel = function reflowLabel(box) {\n    var ref = this;\n    var options = ref.options;\n    var label = ref.label;\n    var anchor = options.labels.position;\n\n    if (label) {\n      anchor = anchor === ABOVE ? TOP : anchor;\n      anchor = anchor === BELOW ? BOTTOM : anchor;\n      label.reflow(box);\n      label.box.alignTo(this.markerBox(), anchor);\n      label.reflow(label.box);\n    }\n  };\n\n  LinePoint.prototype.createHighlight = function createHighlight() {\n    var markers = this.options.highlight.markers;\n    var defaultColor = this.markerBorder().color;\n    var options = this.options.markers;\n    var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n    var shadow = new ShapeElement({\n      type: options.type,\n      width: size,\n      height: size,\n      rotation: options.rotation,\n      background: markers.color || defaultColor,\n      border: {\n        color: markers.border.color,\n        width: markers.border.width,\n        opacity: valueOrDefault(markers.border.opacity, 1)\n      },\n      opacity: valueOrDefault(markers.opacity, 1)\n    });\n    shadow.reflow(this._childBox);\n    return shadow.getElement();\n  };\n\n  LinePoint.prototype.highlightVisual = function highlightVisual() {\n    return (this.marker || {}).visual;\n  };\n\n  LinePoint.prototype.highlightVisualArgs = function highlightVisualArgs() {\n    var marker = this.marker;\n    var visual, rect;\n\n    if (marker) {\n      rect = marker.paddingBox.toRect();\n      visual = marker.visual;\n    } else {\n      var size = this.options.markers.size;\n      var halfSize = size / 2;\n      var center = this.box.center();\n      rect = new geom.Rect([center.x - halfSize, center.y - halfSize], [size, size]);\n    }\n\n    return {\n      options: this.options,\n      rect: rect,\n      visual: visual\n    };\n  };\n\n  LinePoint.prototype.tooltipAnchor = function tooltipAnchor() {\n    var markerBox = this.markerBox();\n    var clipBox = this.owner.pane.clipBox();\n    var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n    if (showTooltip) {\n      var x = markerBox.x2 + TOOLTIP_OFFSET;\n      var horizontalAlign = LEFT;\n      var y, verticalAlign;\n\n      if (this.aboveAxis) {\n        y = markerBox.y1;\n        verticalAlign = BOTTOM;\n      } else {\n        y = markerBox.y2;\n        verticalAlign = TOP;\n      }\n\n      return {\n        point: new Point(x, y),\n        align: {\n          horizontal: horizontalAlign,\n          vertical: verticalAlign\n        }\n      };\n    }\n  };\n\n  LinePoint.prototype.formatValue = function formatValue(format) {\n    return this.owner.formatPointValue(this, format);\n  };\n\n  LinePoint.prototype.overlapsBox = function overlapsBox(box) {\n    var markerBox = this.markerBox();\n    return markerBox.overlaps(box);\n  };\n\n  LinePoint.prototype.unclipElements = function unclipElements() {\n    if (this.label) {\n      this.label.options.noclip = true;\n    }\n\n    if (this.note) {\n      this.note.options.noclip = true;\n    }\n  };\n\n  LinePoint.prototype.pointData = function pointData() {\n    return {\n      dataItem: this.dataItem,\n      category: this.category,\n      value: this.value,\n      percentage: this.percentage,\n      stackValue: this.stackValue,\n      series: this.series\n    };\n  };\n\n  return LinePoint;\n}(ChartElement);\n\nLinePoint.prototype.defaults = {\n  vertical: true,\n  markers: {\n    visible: true,\n    background: WHITE,\n    size: LINE_MARKER_SIZE,\n    type: CIRCLE,\n    border: {\n      width: 2\n    },\n    opacity: 1\n  },\n  labels: {\n    visible: false,\n    position: ABOVE,\n    margin: getSpacing(3),\n    padding: getSpacing(4),\n    animation: {\n      type: FADEIN,\n      delay: INITIAL_ANIMATION_DURATION\n    }\n  },\n  notes: {\n    label: {}\n  },\n  highlight: {\n    markers: {\n      border: {\n        color: \"#fff\",\n        width: 2\n      }\n    },\n    zIndex: HIGHLIGHT_ZINDEX\n  },\n  errorBars: {\n    line: {\n      width: 1\n    }\n  }\n};\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\nexport default LinePoint;","map":{"version":3,"sources":["/Users/lazybaccha/Documents/Honeywell/SBE/node_modules/@progress/kendo-charts/dist/es/chart/line-chart/line-point.js"],"names":["geometry","geom","Color","ChartElement","TextBox","ShapeElement","Box","Point","PointEventsMixin","NoteMixin","LINE_MARKER_SIZE","FADEIN","INITIAL_ANIMATION_DURATION","BORDER_BRIGHTNESS","TOOLTIP_OFFSET","ABOVE","BELOW","WHITE","CIRCLE","CENTER","TOP","BOTTOM","LEFT","HIGHLIGHT_ZINDEX","deepExtend","defined","getTemplate","valueOrDefault","getSpacing","LinePoint","value","options","call","aboveAxis","tooltipTracking","__proto__","prototype","Object","create","constructor","render","ref","markers","labels","_rendered","visible","size","marker","createMarker","append","labelTemplate","pointData","labelText","format","formatValue","label","align","vAlign","margin","left","right","zIndex","series","createNote","errorBar","markerBorder","background","border","color","brightness","toHex","createVisual","type","width","height","rotation","opacity","animation","visual","dataItem","category","markerBox","reflow","_childBox","box","targetBox","this$1","vertical","childBox","clone","y1","y2","x1","x2","reflowLabel","errorBars","i","length","note","noteTargetBox","center","x","y","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","rect","paddingBox","toRect","halfSize","Rect","tooltipAnchor","clipBox","owner","pane","showTooltip","overlaps","horizontalAlign","verticalAlign","point","horizontal","formatPointValue","overlapsBox","unclipElements","noclip","percentage","stackValue","defaults","padding","delay","notes","line"],"mappings":"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","sourcesContent":["import { geometry as geom, Color } from '@progress/kendo-drawing';\n\nimport { ChartElement, TextBox, ShapeElement, Box, Point } from '../../core';\n\nimport PointEventsMixin from '../mixins/point-events-mixin';\nimport NoteMixin from '../mixins/note-mixin';\nimport { LINE_MARKER_SIZE, FADEIN, INITIAL_ANIMATION_DURATION, BORDER_BRIGHTNESS, TOOLTIP_OFFSET, ABOVE, BELOW } from '../constants';\n\nimport { WHITE, CIRCLE, CENTER, TOP, BOTTOM, LEFT, HIGHLIGHT_ZINDEX } from '../../common/constants';\nimport { deepExtend, defined, getTemplate, valueOrDefault, getSpacing } from '../../common';\n\nvar LinePoint = (function (ChartElement) {\n    function LinePoint(value, options) {\n        ChartElement.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n    }\n\n    if ( ChartElement ) LinePoint.__proto__ = ChartElement;\n    LinePoint.prototype = Object.create( ChartElement && ChartElement.prototype );\n    LinePoint.prototype.constructor = LinePoint;\n\n    LinePoint.prototype.render = function render () {\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        if (markers.visible && markers.size) {\n            this.marker = this.createMarker();\n            this.append(this.marker);\n        }\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n            var labelText = this.value;\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = this.formatValue(labels.format);\n            }\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels),\n                pointData\n            );\n            this.append(this.label);\n        }\n\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    };\n\n    LinePoint.prototype.markerBorder = function markerBorder () {\n        var options = this.options.markers;\n        var background = options.background;\n        var border = deepExtend({ color: this.color }, options.border);\n\n        if (!defined(border.color)) {\n            border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n\n        return border;\n    };\n\n    LinePoint.prototype.createVisual = function createVisual () {};\n\n    LinePoint.prototype.createMarker = function createMarker () {\n        var options = this.options.markers;\n        var marker = new ShapeElement({\n            type: options.type,\n            width: options.size,\n            height: options.size,\n            rotation: options.rotation,\n            background: options.background,\n            border: this.markerBorder(),\n            opacity: options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        return marker;\n    };\n\n    LinePoint.prototype.markerBox = function markerBox () {\n        if (!this.marker) {\n            this.marker = this.createMarker();\n            this.marker.reflow(this._childBox);\n        }\n\n        return this.marker.box;\n    };\n\n    LinePoint.prototype.reflow = function reflow (targetBox) {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var aboveAxis = ref.aboveAxis;\n        var vertical = options.vertical;\n\n        this.render();\n\n        this.box = targetBox;\n        var childBox = targetBox.clone();\n\n        if (vertical) {\n            if (aboveAxis) {\n                childBox.y1 -= childBox.height();\n            } else {\n                childBox.y2 += childBox.height();\n            }\n        } else {\n            if (aboveAxis) {\n                childBox.x1 += childBox.width();\n            } else {\n                childBox.x2 -= childBox.width();\n            }\n        }\n\n        this._childBox = childBox;\n        if (this.marker) {\n            this.marker.reflow(childBox);\n        }\n\n        this.reflowLabel(childBox);\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1.errorBars[i].reflow(childBox);\n            }\n        }\n\n        if (this.note) {\n            var noteTargetBox = this.markerBox();\n\n            if (!(options.markers.visible && options.markers.size)) {\n                var center = noteTargetBox.center();\n                noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n            }\n\n            this.note.reflow(noteTargetBox);\n        }\n    };\n\n    LinePoint.prototype.reflowLabel = function reflowLabel (box) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var anchor = options.labels.position;\n\n        if (label) {\n            anchor = anchor === ABOVE ? TOP : anchor;\n            anchor = anchor === BELOW ? BOTTOM : anchor;\n\n            label.reflow(box);\n            label.box.alignTo(this.markerBox(), anchor);\n            label.reflow(label.box);\n        }\n    };\n\n    LinePoint.prototype.createHighlight = function createHighlight () {\n        var markers = this.options.highlight.markers;\n        var defaultColor = this.markerBorder().color;\n        var options = this.options.markers;\n        var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n        var shadow = new ShapeElement({\n            type: options.type,\n            width: size,\n            height: size,\n            rotation: options.rotation,\n            background: markers.color || defaultColor,\n            border: {\n                color: markers.border.color,\n                width: markers.border.width,\n                opacity: valueOrDefault(markers.border.opacity, 1)\n            },\n            opacity: valueOrDefault(markers.opacity, 1)\n        });\n        shadow.reflow(this._childBox);\n\n        return shadow.getElement();\n    };\n\n    LinePoint.prototype.highlightVisual = function highlightVisual () {\n        return (this.marker || {}).visual;\n    };\n\n    LinePoint.prototype.highlightVisualArgs = function highlightVisualArgs () {\n        var marker = this.marker;\n        var visual, rect;\n\n        if (marker) {\n            rect = marker.paddingBox.toRect();\n            visual = marker.visual;\n        } else {\n            var size = this.options.markers.size;\n            var halfSize = size / 2;\n            var center = this.box.center();\n            rect = new geom.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n        }\n\n        return {\n            options: this.options,\n            rect: rect,\n            visual: visual\n        };\n    };\n\n    LinePoint.prototype.tooltipAnchor = function tooltipAnchor () {\n        var markerBox = this.markerBox();\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n        if (showTooltip) {\n            var x = markerBox.x2 + TOOLTIP_OFFSET;\n            var horizontalAlign = LEFT;\n            var y, verticalAlign;\n\n            if (this.aboveAxis) {\n                y = markerBox.y1;\n                verticalAlign = BOTTOM;\n            } else {\n                y = markerBox.y2;\n                verticalAlign = TOP;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    };\n\n    LinePoint.prototype.formatValue = function formatValue (format) {\n        return this.owner.formatPointValue(this, format);\n    };\n\n    LinePoint.prototype.overlapsBox = function overlapsBox (box) {\n        var markerBox = this.markerBox();\n        return markerBox.overlaps(box);\n    };\n\n    LinePoint.prototype.unclipElements = function unclipElements () {\n        if (this.label) {\n            this.label.options.noclip = true;\n        }\n\n        if (this.note) {\n            this.note.options.noclip = true;\n        }\n    };\n\n    LinePoint.prototype.pointData = function pointData () {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    };\n\n    return LinePoint;\n}(ChartElement));\n\nLinePoint.prototype.defaults = {\n    vertical: true,\n    markers: {\n        visible: true,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        position: ABOVE,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: \"#fff\",\n                width: 2\n            }\n        },\n        zIndex: HIGHLIGHT_ZINDEX\n    },\n    errorBars: {\n        line: {\n            width: 1\n        }\n    }\n};\n\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\n\nexport default LinePoint;\n"]},"metadata":{},"sourceType":"module"}