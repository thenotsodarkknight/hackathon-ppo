{"ast":null,"code":"import { Color } from '@progress/kendo-drawing';\nimport Candlestick from '../candlestick-chart/candlestick';\nimport PointEventsMixin from '../mixins/point-events-mixin';\nimport { ShapeElement } from '../../core';\nimport { LINE_MARKER_SIZE, BORDER_BRIGHTNESS } from '../constants';\nimport { CROSS, CIRCLE, WHITE } from '../../common/constants';\nimport { deepExtend, defined, setDefaultOptions } from '../../common';\n\nvar BoxPlot = function (Candlestick) {\n  function BoxPlot(value, options) {\n    Candlestick.call(this, value, options);\n    this.createNote();\n  }\n\n  if (Candlestick) BoxPlot.__proto__ = Candlestick;\n  BoxPlot.prototype = Object.create(Candlestick && Candlestick.prototype);\n  BoxPlot.prototype.constructor = BoxPlot;\n\n  BoxPlot.prototype.reflow = function reflow(box) {\n    var ref = this;\n    var options = ref.options;\n    var value = ref.value;\n    var chart = ref.owner;\n    var valueAxis = chart.seriesValueAxis(options);\n    var whiskerSlot, boxSlot;\n    this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n    this.realBody = boxSlot;\n    this.reflowBoxSlot(box);\n    this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n    this.reflowWhiskerSlot(box);\n    var medianSlot = valueAxis.getSlot(value.median);\n\n    if (value.mean) {\n      var meanSlot = valueAxis.getSlot(value.mean);\n      this.meanPoints = this.calcMeanPoints(box, meanSlot);\n    }\n\n    this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n    this.medianPoints = this.calcMedianPoints(box, medianSlot);\n    this.box = whiskerSlot.clone().wrap(boxSlot);\n    this.reflowNote();\n  };\n\n  BoxPlot.prototype.reflowBoxSlot = function reflowBoxSlot(box) {\n    this.boxSlot.x1 = box.x1;\n    this.boxSlot.x2 = box.x2;\n  };\n\n  BoxPlot.prototype.reflowWhiskerSlot = function reflowWhiskerSlot(box) {\n    this.whiskerSlot.x1 = box.x1;\n    this.whiskerSlot.x2 = box.x2;\n  };\n\n  BoxPlot.prototype.calcMeanPoints = function calcMeanPoints(box, meanSlot) {\n    return [[[box.x1, meanSlot.y1], [box.x2, meanSlot.y1]]];\n  };\n\n  BoxPlot.prototype.calcWhiskerPoints = function calcWhiskerPoints(boxSlot, whiskerSlot) {\n    var mid = whiskerSlot.center().x;\n    return [[[mid - 5, whiskerSlot.y1], [mid + 5, whiskerSlot.y1], [mid, whiskerSlot.y1], [mid, boxSlot.y1]], [[mid - 5, whiskerSlot.y2], [mid + 5, whiskerSlot.y2], [mid, whiskerSlot.y2], [mid, boxSlot.y2]]];\n  };\n\n  BoxPlot.prototype.calcMedianPoints = function calcMedianPoints(box, medianSlot) {\n    return [[[box.x1, medianSlot.y1], [box.x2, medianSlot.y1]]];\n  };\n\n  BoxPlot.prototype.renderOutliers = function renderOutliers(options) {\n    var this$1 = this;\n    var value = this.value;\n    var outliers = value.outliers || [];\n    var outerFence = Math.abs(value.q3 - value.q1) * 3;\n    var elements = [];\n    var markers = options.markers || {};\n\n    for (var i = 0; i < outliers.length; i++) {\n      var outlierValue = outliers[i];\n\n      if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n        markers = options.outliers;\n      } else {\n        markers = options.extremes;\n      }\n\n      var markersBorder = deepExtend({}, markers.border);\n\n      if (!defined(markersBorder.color)) {\n        if (defined(this$1.color)) {\n          markersBorder.color = this$1.color;\n        } else {\n          markersBorder.color = new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n      }\n\n      var shape = new ShapeElement({\n        type: markers.type,\n        width: markers.size,\n        height: markers.size,\n        rotation: markers.rotation,\n        background: markers.background,\n        border: markersBorder,\n        opacity: markers.opacity\n      });\n      shape.value = outlierValue;\n      elements.push(shape);\n    }\n\n    this.reflowOutliers(elements);\n    return elements;\n  };\n\n  BoxPlot.prototype.reflowOutliers = function reflowOutliers(outliers) {\n    var this$1 = this;\n    var valueAxis = this.owner.seriesValueAxis(this.options);\n    var center = this.box.center();\n\n    for (var i = 0; i < outliers.length; i++) {\n      var outlierValue = outliers[i].value;\n      var markerBox = valueAxis.getSlot(outlierValue);\n\n      if (this$1.options.vertical) {\n        markerBox.move(center.x);\n      } else {\n        markerBox.move(undefined, center.y);\n      }\n\n      this$1.box = this$1.box.wrap(markerBox);\n      outliers[i].reflow(markerBox);\n    }\n  };\n\n  BoxPlot.prototype.mainVisual = function mainVisual(options) {\n    var group = Candlestick.prototype.mainVisual.call(this, options);\n    var outliers = this.renderOutliers(options);\n\n    for (var i = 0; i < outliers.length; i++) {\n      var element = outliers[i].getElement();\n\n      if (element) {\n        group.append(element);\n      }\n    }\n\n    return group;\n  };\n\n  BoxPlot.prototype.createLines = function createLines(container, options) {\n    this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n    this.drawLines(container, options, this.medianPoints, options.median);\n    this.drawLines(container, options, this.meanPoints, options.mean);\n  };\n\n  BoxPlot.prototype.getBorderColor = function getBorderColor() {\n    if ((this.options.border || {}).color) {\n      return this.options.border.color;\n    }\n\n    if (this.color) {\n      return this.color;\n    }\n\n    return Candlestick.prototype.getBorderColor.call(this);\n  };\n\n  return BoxPlot;\n}(Candlestick);\n\nsetDefaultOptions(BoxPlot, {\n  border: {\n    _brightness: 0.8\n  },\n  line: {\n    width: 2\n  },\n  median: {\n    color: \"#f6f6f6\"\n  },\n  mean: {\n    width: 2,\n    dashType: \"dash\",\n    color: \"#f6f6f6\"\n  },\n  overlay: {\n    gradient: \"glass\"\n  },\n  tooltip: {\n    format: \"<table>\" + \"<tr><th colspan='2'>{6:d}</th></tr>\" + \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" + \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" + \"<tr><td>Median:</td><td>{2:C}</td></tr>\" + \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" + \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" + \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" + \"</table>\"\n  },\n  highlight: {\n    opacity: 1,\n    border: {\n      width: 1,\n      opacity: 1\n    },\n    line: {\n      width: 1,\n      opacity: 1\n    }\n  },\n  notes: {\n    visible: true,\n    label: {}\n  },\n  outliers: {\n    visible: true,\n    size: LINE_MARKER_SIZE,\n    type: CROSS,\n    background: WHITE,\n    border: {\n      width: 2,\n      opacity: 1\n    },\n    opacity: 0\n  },\n  extremes: {\n    visible: true,\n    size: LINE_MARKER_SIZE,\n    type: CIRCLE,\n    background: WHITE,\n    border: {\n      width: 2,\n      opacity: 1\n    },\n    opacity: 0\n  }\n});\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\nexport default BoxPlot;","map":{"version":3,"sources":["/Users/lazybaccha/Documents/Honeywell/SBE/node_modules/@progress/kendo-charts/dist/es/chart/box-plot-chart/box-plot.js"],"names":["Color","Candlestick","PointEventsMixin","ShapeElement","LINE_MARKER_SIZE","BORDER_BRIGHTNESS","CROSS","CIRCLE","WHITE","deepExtend","defined","setDefaultOptions","BoxPlot","value","options","call","createNote","__proto__","prototype","Object","create","constructor","reflow","box","ref","chart","owner","valueAxis","seriesValueAxis","whiskerSlot","boxSlot","getSlot","q1","q3","realBody","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","clone","wrap","reflowNote","x1","x2","y1","mid","center","x","y2","renderOutliers","this$1","outliers","outerFence","Math","abs","elements","markers","i","length","outlierValue","extremes","markersBorder","border","color","background","brightness","toHex","shape","type","width","size","height","rotation","opacity","push","reflowOutliers","markerBox","vertical","move","undefined","y","mainVisual","group","element","getElement","append","createLines","container","drawLines","whiskers","getBorderColor","_brightness","line","dashType","overlay","gradient","tooltip","format","highlight","notes","visible","label"],"mappings":"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","sourcesContent":["import { Color } from '@progress/kendo-drawing';\n\nimport Candlestick from '../candlestick-chart/candlestick';\nimport PointEventsMixin from '../mixins/point-events-mixin';\nimport { ShapeElement } from '../../core';\n\nimport { LINE_MARKER_SIZE, BORDER_BRIGHTNESS } from '../constants';\n\nimport { CROSS, CIRCLE, WHITE } from '../../common/constants';\nimport { deepExtend, defined, setDefaultOptions } from '../../common';\n\nvar BoxPlot = (function (Candlestick) {\n    function BoxPlot(value, options) {\n        Candlestick.call(this, value, options);\n\n        this.createNote();\n    }\n\n    if ( Candlestick ) BoxPlot.__proto__ = Candlestick;\n    BoxPlot.prototype = Object.create( Candlestick && Candlestick.prototype );\n    BoxPlot.prototype.constructor = BoxPlot;\n\n    BoxPlot.prototype.reflow = function reflow (box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var whiskerSlot, boxSlot;\n\n        this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n        this.realBody = boxSlot;\n        this.reflowBoxSlot(box);\n\n        this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n        this.reflowWhiskerSlot(box);\n\n        var medianSlot = valueAxis.getSlot(value.median);\n\n        if (value.mean) {\n            var meanSlot = valueAxis.getSlot(value.mean);\n            this.meanPoints = this.calcMeanPoints(box, meanSlot);\n        }\n\n        this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n        this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n        this.box = whiskerSlot.clone().wrap(boxSlot);\n        this.reflowNote();\n    };\n\n    BoxPlot.prototype.reflowBoxSlot = function reflowBoxSlot (box) {\n        this.boxSlot.x1 = box.x1;\n        this.boxSlot.x2 = box.x2;\n    };\n\n    BoxPlot.prototype.reflowWhiskerSlot = function reflowWhiskerSlot (box) {\n        this.whiskerSlot.x1 = box.x1;\n        this.whiskerSlot.x2 = box.x2;\n    };\n\n    BoxPlot.prototype.calcMeanPoints = function calcMeanPoints (box, meanSlot) {\n        return [\n            [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n        ];\n    };\n\n    BoxPlot.prototype.calcWhiskerPoints = function calcWhiskerPoints (boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().x;\n        return [ [\n            [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n            [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n        ], [\n            [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n            [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n        ] ];\n    };\n\n    BoxPlot.prototype.calcMedianPoints = function calcMedianPoints (box, medianSlot) {\n        return [\n            [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n        ];\n    };\n\n    BoxPlot.prototype.renderOutliers = function renderOutliers (options) {\n        var this$1 = this;\n\n        var value = this.value;\n        var outliers = value.outliers || [];\n        var outerFence = Math.abs(value.q3 - value.q1) * 3;\n        var elements = [];\n        var markers = options.markers || {};\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i];\n            if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                markers = options.outliers;\n            } else {\n                markers = options.extremes;\n            }\n            var markersBorder = deepExtend({}, markers.border);\n\n            if (!defined(markersBorder.color)) {\n                if (defined(this$1.color)) {\n                    markersBorder.color = this$1.color;\n                } else {\n                    markersBorder.color =\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                }\n            }\n\n            var shape = new ShapeElement({\n                type: markers.type,\n                width: markers.size,\n                height: markers.size,\n                rotation: markers.rotation,\n                background: markers.background,\n                border: markersBorder,\n                opacity: markers.opacity\n            });\n\n            shape.value = outlierValue;\n\n            elements.push(shape);\n        }\n\n        this.reflowOutliers(elements);\n        return elements;\n    };\n\n    BoxPlot.prototype.reflowOutliers = function reflowOutliers (outliers) {\n        var this$1 = this;\n\n        var valueAxis = this.owner.seriesValueAxis(this.options);\n        var center = this.box.center();\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i].value;\n            var markerBox = valueAxis.getSlot(outlierValue);\n\n            if (this$1.options.vertical) {\n                markerBox.move(center.x);\n            } else {\n                markerBox.move(undefined, center.y);\n            }\n\n            this$1.box = this$1.box.wrap(markerBox);\n            outliers[i].reflow(markerBox);\n        }\n    };\n\n    BoxPlot.prototype.mainVisual = function mainVisual (options) {\n        var group = Candlestick.prototype.mainVisual.call(this, options);\n        var outliers = this.renderOutliers(options);\n\n        for (var i = 0; i < outliers.length; i++) {\n            var element = outliers[i].getElement();\n            if (element) {\n                group.append(element);\n            }\n        }\n\n        return group;\n    };\n\n    BoxPlot.prototype.createLines = function createLines (container, options) {\n        this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n        this.drawLines(container, options, this.medianPoints, options.median);\n        this.drawLines(container, options, this.meanPoints, options.mean);\n    };\n\n    BoxPlot.prototype.getBorderColor = function getBorderColor () {\n        if ((this.options.border || {}).color) {\n            return this.options.border.color;\n        }\n\n        if (this.color) {\n            return this.color;\n        }\n\n        return Candlestick.prototype.getBorderColor.call(this);\n    };\n\n    return BoxPlot;\n}(Candlestick));\n\nsetDefaultOptions(BoxPlot, {\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    median: {\n        color: \"#f6f6f6\"\n    },\n    mean: {\n        width: 2,\n        dashType: \"dash\",\n        color: \"#f6f6f6\"\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                    \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                    \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                    \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    outliers: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CROSS,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    },\n    extremes: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    }\n});\n\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\n\nexport default BoxPlot;"]},"metadata":{},"sourceType":"module"}